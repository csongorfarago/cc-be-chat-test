'use strict';

var _ava = require('ava');

var _ava2 = _interopRequireDefault(_ava);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const server = require('../server.js');

const WebSocket = require('ws');

_ava2.default.cb('connection', t => {
    var ws = new WebSocket('ws://localhost:8080');
    ws.on('open', function open() {
        t.pass();
        ws.close();
    });
    ws.on('error', function open(error) {
        t.fail(error);
    });
    ws.on('close', function open(error) {
        t.end();
    });
});

_ava2.default.cb('Setting Name', t => {
    var ws = new WebSocket('ws://localhost:8080');
    ws.on('open', function open() {
        console.log('server is connected');

        var data = {};
        data['name'] = "testName123";
        ws.send("01" + JSON.stringify(data));
    });
    ws.on('message', function incoming(message) {
        t.is(message.substring(0, 23), '02{"name":"testName123",');
        t.end();
    });
});
//# sourceMappingURL=..\node_modules\.cache\ava\a3807d28284e9d224c5611e800c7181d.js.map