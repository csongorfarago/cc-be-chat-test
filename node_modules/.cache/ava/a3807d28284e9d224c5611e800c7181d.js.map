{"version":3,"sources":["server.test.js"],"names":["server","require","WebSocket","test","cb","t","ws","on","open","pass","close","error","fail","end","console","log","data","send","JSON","stringify","incoming","message","is","substring"],"mappings":";;AAAA;;;;;;AACA,MAAMA,SAASC,QAAQ,cAAR,CAAf;;AAEA,MAAMC,YAAYD,QAAQ,IAAR,CAAlB;;AAEAE,cAAKC,EAAL,CAAQ,YAAR,EAAsBC,KAAK;AACvB,QAAIC,KAAK,IAAIJ,SAAJ,CAAc,qBAAd,CAAT;AACAI,OAAGC,EAAH,CAAM,MAAN,EAAc,SAASC,IAAT,GAAgB;AAC1BH,UAAEI,IAAF;AACAH,WAAGI,KAAH;AACH,KAHD;AAIAJ,OAAGC,EAAH,CAAM,OAAN,EAAe,SAASC,IAAT,CAAcG,KAAd,EAAqB;AAChCN,UAAEO,IAAF,CAAOD,KAAP;AACH,KAFD;AAGAL,OAAGC,EAAH,CAAM,OAAN,EAAe,SAASC,IAAT,CAAcG,KAAd,EAAqB;AAChCN,UAAEQ,GAAF;AACH,KAFD;AAGH,CAZD;;AAcAV,cAAKC,EAAL,CAAQ,cAAR,EAAwBC,KAAK;AACzB,QAAIC,KAAK,IAAIJ,SAAJ,CAAc,qBAAd,CAAT;AACAI,OAAGC,EAAH,CAAM,MAAN,EAAc,SAASC,IAAT,GAAgB;AAC1BM,gBAAQC,GAAR,CAAY,qBAAZ;;AAEA,YAAIC,OAAO,EAAX;AACAA,aAAK,MAAL,IAAe,aAAf;AACAV,WAAGW,IAAH,CAAQ,OAAKC,KAAKC,SAAL,CAAeH,IAAf,CAAb;AACH,KAND;AAOAV,OAAGC,EAAH,CAAM,SAAN,EAAiB,SAASa,QAAT,CAAkBC,OAAlB,EAA2B;AACxChB,UAAEiB,EAAF,CAAKD,QAAQE,SAAR,CAAkB,CAAlB,EAAoB,EAApB,CAAL,EAA8B,0BAA9B;AACAlB,UAAEQ,GAAF;AACH,KAHD;AAIH,CAbD","file":"server.test.js","sourcesContent":["import test from 'ava';\r\nconst server = require('../server.js');\r\n\r\nconst WebSocket = require('ws');  \r\n\r\ntest.cb('connection', t => {      \r\n    var ws = new WebSocket('ws://localhost:8080');\r\n    ws.on('open', function open() {\r\n        t.pass();\r\n        ws.close();\r\n    });  \r\n    ws.on('error', function open(error) {\r\n        t.fail(error);\r\n    });      \r\n    ws.on('close', function open(error) {\r\n        t.end();\r\n    });       \r\n})\r\n\r\ntest.cb('Setting Name', t => {      \r\n    var ws = new WebSocket('ws://localhost:8080');\r\n    ws.on('open', function open() {\r\n        console.log('server is connected');\r\n        \r\n        var data = {};\r\n        data['name'] = \"testName123\"; \r\n        ws.send(\"01\"+JSON.stringify(data));\r\n    });  \r\n    ws.on('message', function incoming(message) {\r\n        t.is(message.substring(0,23), '02{\"name\":\"testName123\",');\r\n        t.end();\r\n    });             \r\n})"]}