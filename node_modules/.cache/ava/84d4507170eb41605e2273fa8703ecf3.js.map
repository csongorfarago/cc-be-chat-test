{"version":3,"sources":["server.test.js"],"names":["server","require","WebSocket","test","cb","t","ws1","on","open","pass","ws","close","handleError","error","fail","reason","end","ws2","send","incoming","message","substring","is","ws3","console","log"],"mappings":";;AAAA;;;;;;AACA,MAAMA,SAASC,QAAQ,cAAR,CAAf;;AAEA,MAAMC,YAAYD,QAAQ,IAAR,CAAlB;;AAEAE,cAAKC,EAAL,CAAQ,YAAR,EAAsBC,KAAK;AACvB,QAAIC,MAAM,IAAIJ,SAAJ,CAAc,qBAAd,CAAV;AACAI,QAAIC,EAAJ,CAAO,MAAP,EAAe,SAASC,IAAT,GAAgB;AAC3BH,UAAEI,IAAF;AACAC,WAAGC,KAAH;AACH,KAHD;AAIAL,QAAIC,EAAJ,CAAO,OAAP,EAAgB,SAASK,WAAT,CAAqBC,KAArB,EAA4B;AACxCR,UAAES,IAAF,CAAOD,KAAP;AACH,KAFD;AAGAP,QAAIC,EAAJ,CAAO,OAAP,EAAgB,SAASK,WAAT,CAAqBG,MAArB,EAA6B;AACzCV,UAAEW,GAAF;AACH,KAFD;AAGH,CAZD;;AAcAb,cAAKC,EAAL,CAAQ,cAAR,EAAwBC,KAAK;AACzB,QAAIY,MAAM,IAAIf,SAAJ,CAAc,qBAAd,CAAV;AACAe,QAAIV,EAAJ,CAAO,MAAP,EAAe,SAASC,IAAT,GAAgB;AAC3BS,YAAIC,IAAJ,CAAS,0BAAT;AACH,KAFD;AAGAD,QAAIV,EAAJ,CAAO,SAAP,EAAkB,SAASY,QAAT,CAAkBC,OAAlB,EAA2B;AACzC,YAAGA,QAAQC,SAAR,CAAkB,CAAlB,EAAoB,CAApB,KAA0B,IAA7B,EAAkC;AAC9BhB,cAAEiB,EAAF,CAAKF,QAAQC,SAAR,CAAkB,CAAlB,EAAoB,EAApB,CAAL,EAA8B,0BAA9B;AACAhB,cAAEW,GAAF;AACH;AACJ,KALD;AAMAC,QAAIV,EAAJ,CAAO,OAAP,EAAgB,SAASK,WAAT,CAAqBC,KAArB,EAA4B;AACxCR,UAAEW,GAAF;AACH,KAFD;AAGH,CAdD;;AAgBAb,cAAKC,EAAL,CAAQ,iBAAR,EAA2BC,KAAK;AAC5B,QAAIkB,MAAM,IAAIrB,SAAJ,CAAc,qBAAd,CAAV;AACAqB,QAAIhB,EAAJ,CAAO,MAAP,EAAe,SAASC,IAAT,GAAgB;AAC3Be,YAAIL,IAAJ,CAAS,0BAAT;AACAK,YAAIL,IAAJ,CAAS,gCAAT;AACH,KAHD;AAIAK,QAAIhB,EAAJ,CAAO,SAAP,EAAkB,SAASY,QAAT,CAAkBC,OAAlB,EAA2B;AACrCI,gBAAQC,GAAR,CAAYL,OAAZ;AACP,KAFD;AAGH,CATD","file":"server.test.js","sourcesContent":["import test from 'ava';\r\nconst server = require('../server.js');\r\n\r\nconst WebSocket = require('ws');  \r\n\r\ntest.cb('connection', t => {      \r\n    var ws1 = new WebSocket('ws://localhost:8080');\r\n    ws1.on('open', function open() {\r\n        t.pass();\r\n        ws.close();\r\n    });  \r\n    ws1.on('error', function handleError(error) {\r\n        t.fail(error);\r\n    });      \r\n    ws1.on('close', function handleError(reason) {\r\n        t.end();\r\n    });       \r\n})\r\n\r\ntest.cb('Setting Name', t => {      \r\n    var ws2 = new WebSocket('ws://localhost:8080');\r\n    ws2.on('open', function open() {\r\n        ws2.send('01{\"name\":\"testName123\"}');\r\n    });  \r\n    ws2.on('message', function incoming(message) {\r\n        if(message.substring(0,2) == \"01\"){\r\n            t.is(message.substring(0,24), '01{\"name\":\"testName123\",');\r\n            t.end();\r\n        }\r\n    }); \r\n    ws2.on('close', function handleError(error) {\r\n        t.end();\r\n    });                  \r\n})\r\n\r\ntest.cb('Sending message', t => {      \r\n    var ws3 = new WebSocket('ws://localhost:8080');\r\n    ws3.on('open', function open() {\r\n        ws3.send('01{\"name\":\"testName123\"}');\r\n        ws3.send('02{\"message\":\"testMessage123\"}');\r\n    });  \r\n    ws3.on('message', function incoming(message) {\r\n            console.log(message);\r\n    });                 \r\n})"]}